title Suggestion Sequence Diagram

participant FrontEnd #green
participant SuggestionController #orange
participant AuthorizationManager #red

participant SuggestionManager #lightgreen

participant EventAPIService #cyan
participant Event #blue
participant SuggestionDAO #lightblue
participant MicrosoftSQL Server #purple

autoactivation 
SuggestionController->AuthorizationManager:Dependencies Injection: new AuthorizationManager( )
AuthorizationManager->AuthorizationManager:Authorization( )
AuthorizationManager-->SuggestionController:return _authzManager
FrontEnd->SuggestionController:HTTP Header(int userID, string token, string claimRole) \n(string category, string location, DateTime date)

// The start of API call
SuggestionController->SuggestionController: ActionResult<List<Event>> GetEvent( )
group if (token == null)
SuggestionController-->FrontEnd:throw new HTTPReponseException("Invalid Token")
end 
SuggestionController->SuggestionController:bool isAuthorized = _authzManager.IsAuthorized\n(int userID, string token, string claimRole)

group if (isAuthorized == false)
SuggestionController-->FrontEnd:throw new HTTPReponseException\n("Not authorized to use access this feature")
end

//
group else
//Instantiate necessary classes
SuggestionManager->EventAPIService: new EventAPIService( )
EventAPIService->EventAPIService:EventAPIService( )
EventAPIService-->SuggestionManager:return _eventAPIService
SuggestionManager->SuggestionDAO: new SuggestionDAO( )
SuggestionDAO->SuggestionDAO:SuggestionDAO( )
SuggestionDAO-->SuggestionManager:return _suggsetionDAO

SuggestionManager->SuggestionManager:List<Event> SuggestionManager.GetEvent\n(string cat, string location, Datetime date)
SuggestionManager->EventAPIService: JObject EventAPIService.GetEvent(string query)
EventAPIService-->SuggestionManager:return eventResult

//Conver JSON object to Event
SuggestionManager->SuggestionDAO:List<Event> SuggestionDAO.ParseJSON(JObject o)
SuggestionDAO->SuggestionDAO:new Event( )
SuggestionDAO-->SuggestionManager: return eventList
SuggestionManager-->SuggestionController: return eventList
SuggestionController-->FrontEnd:return eventList
end

SuggestionManager->SuggestionDAO: new SuggestionDAO()
