title Calendar Feature

participant FrontEnd #BCD6F2
participant CalendarController #F2C5BC
participant AuthorizationManager #BCF2F1
participant CalendarManager #DAF7A6
participant CalendarDAO #D8BCF2
//participant SuggestionResponse #F2BCD9
participant Microsoft SQL Server #F2F1BC





CalendarController->AuthorizationManager:Dependency Injection: new Authorization Manager()
AuthorizationManager->AuthorizationManager:Authorization( )
AuthorizationManager-->CalendarController:return _authzManager


CalendarController->CalendarManager: Dependency Injection: new CalendarManager()
CalendarManager->CalendarManager: CalendarManager()
CalendarManager->CalendarDAO: CalendarDAO calendarDAO = new CalendarDAO()
CalendarDAO->CalendarDAO: CalendarDAO()
CalendarDAO -->CalendarManager: return CalendarDAO instance
CalendarManager-->CalendarController:return _calendarManager


FrontEnd->CalendarController:HTTP Header(int userID, string token, string claimRole)\n           (int userID)

CalendarController->CalendarController: HTTP GET ActionResult<List<Itineraries>> getItinerary(userID) 
group if (token == null)
CalendarController-->FrontEnd:return BadRequest("Invalid Token")
end 
CalendarController->CalendarController:bool isAuthorized = _authzManager.IsAuthorized\n(int userID, string token, string claimRole)

group if (isAuthorized == false)
CalendarController-->FrontEnd:return BadRequest("User is not authorized to use this feature")
end

group else

CalendarManager->CalendarManager: List<Itinerary> LoadUserIteraries(userID) 
CalendarManager-> CalendarDAO:List<Itinerary>CalendarDAO.GetUserItineraries(userID)
CalendarDAO->Microsoft SQL Server: from itinerary in _dbContext.Itin.Include("Events") where ownerID == userID select itin.toList()
Microsoft SQL Server->Microsoft SQL Server: SQL Commands

Microsoft SQL Server-->CalendarDAO: List<Itinerary> itineraries
CalendarDAO-->CalendarManager: List<Itinerary> itineraries
CalendarManager-->CalendarController: List<Itinerary> itineraries
CalendarController-->FrontEnd: List<Itinerary> itineraries
end